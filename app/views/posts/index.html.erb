<h1>武将検索</h1>

<div class="text-center">
<%= link_to ranks_posts_path, class: "btn btn-index" do %>
  <i class="fa-solid fa-ranking-star"></i>&nbsp;<span>武将ランキング</span>
<% end %>
</div>

<section class="form">
  <%= search_form_for @q do |f| %>
    <%= f.label :name_cont, "武将名" %>
    <%= f.search_field :name_cont, size: 15 %>&emsp;
    <%= f.label :furigana_initial_cont, "武将名(50音)" %>
    <%= f.collection_select :furigana_initial_cont, Furigana.all, :ini, :ini, {include_blank: "---"} %>&emsp;
    <%= f.label :prefecture_name_cont, "出身地" %>
    <%= f.collection_select :prefecture_name_cont, Prefecture.all, :name, :name, {include_blank: "---"} %>
    <%= button_tag type: 'submit', class: 'btn btn-comment-search' do %>
      <i class="fa-solid fa-magnifying-glass"></i>&nbsp;<span>検索</span>
    <% end %>
  <% end %>
</section>

<section class="row g-4">
  <% @posts.each do |post| %>
    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
      <div class="card h-100 text-card-container">
        <%= link_to post do %>
          <div class="card-title"><%= post.name %></div>
          <div class="card-img-top">
            <%= image_tag post.image.url, :size => "150" %>
          </div>
        <% end %>

        <div class="card-body">
          <p class="card-text"><%= post.commentary %></p>
          <%= link_to post, class: "btn btn-show-delete" do %>
            <i class="fas fa-envelope-open-text"></i>&nbsp;<span>詳細</span>
          <% end %>

          <% if user_signed_in? %>
            <p id="post-<%= post.id %>" >
            <% if post.liked_by?(current_user) %>
              <%= render "like", post: post %>
            <% else %>
              <%= render "dislike", post: post %>
            <% end %>
          <% end %>
          </p>
        </div>
      </div>
    </div>
  <% end %>
</section>

<section class="pagination justify-content-center">
  <%= paginate @posts %>
</section>